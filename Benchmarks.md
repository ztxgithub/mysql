# 基准测试

## 基本概念

```shell
    1.基准测试：测量系统的性能，是一种测量和评估软件性能指标的活动，用于建立某个时刻的性能基准，以便当系统软硬件发生变化时重新进行
               基准测试来评估变化对性能的影响。是针对系统设置的一种压力测试。
    2.基准测试与压力测试的区别
        基准测试：直接，简单，易于比较，用于评估服务器的处理能力，用现成的测试工具，它是简化了的压力测试，不关心业务逻辑
        压力测试：对真实的业务数据进行测试，获取真实系统所承受的压力
        例如对一个网站进行压力测试，需要针对不同的主题，所使用的数据和查询也是真实用到的。
```

## 基准测试的目的

```shell
    1.建立MySQL服务器的性能基准线：确定当前MySQL服务器当前的运行情况
    2.模拟比当前系统更高的负载，以找出系统的扩张瓶颈： 主要的实现方式增加对数据库并发，观察QPS，TPS变化，确定并发量和性能最优的关系(
                                                通过不断的调整对数据库的并发得到性能最优的情况，超过这个并发量性能可能会下降)
    3.基准测试还测试不同的硬件，软件和操作系统配置：比如在硬件方面RAID0和RAID5哪种更适合MySQL，如果系统从机械硬盘升级到SSD对随机写
                                              会有什么帮助，linux下不同磁盘分区格式(文件系统)对数据库性能是否有影响，升级MySQL的
                                              版本是否能改善性能。
    4.证明新的硬件设备是否配置正确： 在新的硬件正式上线到生产环境之前，一定要对新的系统进行基准测试，这不仅可以帮助我们了解新的设备的
                                 基准线，还可以帮助我们看看其配置是否正确
```

## 如何进行基准测试

```shell
    1.对整个系统进行基准测试：
           从系统的入口进行测试(如网站Web前端，手机App前端),
                    优点 I:能够测试整个系统的性能，包括Web服务器，缓存，数据库等
                        II:能反映出系统中各个组件接口间的性能问题，体现真实性能的状况。
                        
                    缺点 测试设计复杂，不够简单，消耗时间长
                    
    2.单独对MySQL进行基准测试：
            不需要对整个系统进行基准测试，只需要对单独组件进行测试，适合场景是只对MySQL进行了优化(包括表结构和索引)，其他组件保持不变，
                    优点: 试设计简单，所需耗费的时间短
                    缺点: 无法全面了解整个系统的性能基线，也无法体现不同组件接口间的性能问题
```

## MySQL基准测试常用的指标

```shell
    1.单位时间内所处理的事务数(TPS)
    2.单位时间内所处理的查询数(QPS)
    3.响应时间：用于衡量完成一个测试所花费的整体时间，有百分比响应时间：一个SQL90%的响应时间是10ms,那么认为该SQL在正常情况下为10ms
    4.并发量:同时处理的查询请求的数量 ！= 连接数，并发量是正在工作中的并发的操作数或者同时工作的数量
```